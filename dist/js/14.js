(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{403:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"classify"},[a("h2",{staticClass:"tip-title"},[t._v("\n        分类列表及参数配置\n        "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:function(e){return t.handleGet(!0)}}})],1),t._v(" "),a("el-table",{attrs:{data:t.classifyList,"max-height":"350",border:""}},[a("el-table-column",{attrs:{label:"分类编号",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.id)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分类名称",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.name)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分类默认参数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("listToString")(e.row.defaultParams))+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"info"},on:{click:function(a){return t.editDetail(e.$index,e.row)}}},[t._v("\n                    修改\n                ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否启用",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{value:e.row.disabled},on:{change:function(a){return t.sendReq("/api/classify","disabled",a,e.row)}}})]}}])})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增分类")])],1)],1)};s._withStripped=!0;var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{staticStyle:{"max-height":"400px","overflow-y":"auto"},attrs:{model:t.form,inline:"","label-width":"80px"}},[a("h3",{staticStyle:{"font-weight":"600"}},[t._v("请认真核对表单信息后再进行确认提交！！！")]),t._v(" "),a("el-form-item",{attrs:{label:"分类名称"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),t._l(t.form.defaultParams,(function(e,s){return a("el-form-item",{key:s,attrs:{label:"参数"+s}},[a("el-input",{staticStyle:{width:"auto"},model:{value:t.form.defaultParams[s].name,callback:function(e){t.$set(t.form.defaultParams[s],"name",e)},expression:"form.defaultParams[i].name"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.delParamItem(t.form.defaultParams,s)}}},[t._v("删除参数")])],1)})),t._v(" "),a("el-button",{staticStyle:{display:"block","margin-left":"90px"},attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:t.addParamItem}},[t._v("新增参数\n    ")])],2)};l._withStripped=!0;var n={name:"Edit",props:{form:{type:Object,default:()=>({name:"",defaultParams:[]})}},methods:{delParamItem(t,e){t.splice(e,1)},addParamItem(){this.form.defaultParams.push({name:""})},update(){console.log("能修改么")}}},i=a(46),r=Object(i.a)(n,l,[],!1,null,"6107ab77",null);r.options.__file="src/components/config/Edit.vue";var o=r.exports,c=a(70),f={name:"Classify",filters:{listToString:t=>t.map((t,e)=>t.name).join("，")},computed:{...Object(c.b)("config",["classifyList"]),...Object(c.b)(["Dict"])},data:()=>({classifyItem:{}}),created(){this.handleGet()},methods:{handleAdd(){this.classifyItem={name:"",defaultParams:[]};const t=this.$createElement(o,{props:{form:this.classifyItem}});this.reMsgBox("新增分类",t,async()=>{try{const t=await this.$http.put("/api/classify",this.classifyItem);return this.classifyItem={},200===t.status&&(this.handleGet(!0),!0)}catch(t){return this.classifyItem={},!1}})},handleGet(t=!1){let e=null;if(t||(e=this._getLocal("classifyList","config")),e)return null;this.$http.get("/api/classify").then(t=>{401===t.status||200===t.status&&this._setLocal("classifyList",t.data,"config")},t=>{console.log(t)})},editDetail(t,e){const a="编辑分类id:"+e.id;this.classifyItem=JSON.parse(JSON.stringify({name:e.name,defaultParams:e.defaultParams}));const s=this.$createElement(o,{props:{form:this.classifyItem}});this.reMsgBox(a,s,async()=>{try{await this.$http.post("/api/classify",{id:e.id,obj:this.classifyItem});return this.handleGet(!0),this.classifyItem={},!0}catch(t){return this.classifyItem={},!1}})}}},u=Object(i.a)(f,s,[],!1,null,"e2dd4f1e",null);u.options.__file="src/components/config/Classify.vue";e.default=u.exports}}]);