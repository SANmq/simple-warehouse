(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{389:function(e,t,a){},393:function(e,t,a){"use strict";var n=a(389);a.n(n).a},395:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{on:{click:function(t){e.disabled&&e.openEdit(t.target)}}},[e.textarea?a("textarea",{attrs:{disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.test(t.target,t.target.value)},blur:e.closeEdit,change:e.callback}}):a("input",{attrs:{disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.test(t.target,t.target.value)},blur:e.closeEdit,change:e.callback}})])};n._withStripped=!0;var l={name:"EasyEdit",props:{value:{require:!0},re:{type:RegExp,default:()=>/((^[1-9]\d*?|^0)\.\d{0,2}$|^[1-9]\d*?$|^0$)/},textarea:{type:Boolean,default:!1}},data:()=>({disabled:!0,value_:""}),methods:{openEdit(e){this.disabled=!1,setTimeout(()=>{e.focus()},0)},closeEdit(e){this.disabled=!0},validate(e){for(;e&&!this.re.test(e);)e=e.replace(/.$/,"");return e},test(e){e.value=this.validate(e.value),this.value_=e.value},callback(){this.value_=this.value_.replace(/\.$/,""),this.$emit("change",this.value_)}}},i=(a(393),a(27)),r=Object(i.a)(l,n,[],!1,null,"cbabd454",null);r.options.__file="src/components/manage/EasyEdit.vue";t.a=r.exports},403:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sale-manage"},[a("el-table",{attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"商品编号",align:"center",width:"100"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"编号检索"},model:{value:e.searchId,callback:function(t){e.searchId=t},expression:"searchId"}})]}},{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品昵称",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.nickname)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"100",label:"商品数量",prop:"number"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品简图",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"40px",height:"40px","vertical-align":"middle"},attrs:{src:t.row.imageUrlList.length?e.localhost+"/upload/"+t.row.imageUrlList[0]:"","preview-src-list":t.row.imageUrlList.map((function(t){return e.localhost+"/upload/"+t})),fit:"cover"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n                销售标价"),a("i",{staticClass:"el-icon-edit"})]}},{key:"default",fn:function(t){return[a("EasyEdit",{attrs:{value:t.row.price},on:{change:function(a){return e.sendReq(a,"price",t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n                销售折扣"),a("i",{staticClass:"el-icon-edit"})]}},{key:"default",fn:function(t){return[a("EasyEdit",{attrs:{value:t.row.discount,re:/(^1$|^0\.\d?$|^0$)/},on:{change:function(a){return e.sendReq(a,"discount",t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"200"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n                细节描述"),a("i",{staticClass:"el-icon-edit"})]}},{key:"default",fn:function(t){return[a("EasyEdit",{attrs:{value:t.row.detail,re:/^.{0,200}$/,textarea:!0},on:{change:function(a){return e.sendReq(a,"detail",t.row,!1)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n                是否上架"),a("i",{staticClass:"el-icon-edit"})]}},{key:"default",fn:function(t){return[a("el-switch",{attrs:{value:t.row.isOnSale,disabled:t.row.isSale,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.sendReq(a,"isOnSale",t.row,!1)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"出售状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.isSale?"已售出":"未售出")+"\n            ")]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{display:"flex","justify-content":"center"},attrs:{background:"","hide-on-single-page":!0,"current-page":e.currentPage,"page-size":e.limit,layout:"prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)};n._withStripped=!0;var l=a(395),i=a(69),r={name:"Sale",components:{EasyEdit:l.a},data:()=>({tableData:[],oneDate:[],searchId:"",limit:8,currentPage:1,total:0}),created(){this.getData()},computed:Object(i.b)(["localhost"]),methods:{getData(){this.$http.get("/api/manage/sale",{params:{limit:this.limit,currentPage:this.currentPage}}).then(e=>{200===e.status&&(this.total=e.data.total,this.tableData=e.data.rows)})},sendReq(e,t,a,n=!0){n&&(e=Number(e)),console.log(e,a.isOnSale,{id:a.id,obj:{[t]:e}});let l="";l="boolean"==typeof e?"确定要"+(e?"打开":"关闭")+"该选项么？":"number"==typeof e?`确定要将${a[t]}修改为${e}`:`是否要将原有结果修改为（“${e}”）么？`,this.$confirm(l,"提示").then(n=>{this.$http.post("/api/manage",{id:a.id,obj:{[t]:e}}).then(n=>{200===n.status?(a[t]=e,this.successMsg()):this.failMsg()},()=>{this.failMsg()})},e=>{this.cancelMsg()})}}},s=a(27),o=Object(s.a)(r,n,[],!1,null,"648d3471",null);o.options.__file="src/components/manage/Sale.vue";t.default=o.exports}}]);